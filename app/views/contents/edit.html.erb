<%- model_class = @content.class -%>
<div class="page-header">
  <h1><%=t '.title', :default => t('helpers.titles.define', :model => model_class.model_name.human,
                   :default => "Edit #{model_class.model_name.human}") %></h1>
</div>
<%= form_for @content, :as => :content, :url => content_path(@content.id), :html => { :class => 'form-horizontal' } do |f| %>
  <% @content.data_fields.each do |fk, val| %>
  <div class="control-group">
    <%= f.label fk.intern, :class => 'control-label' %>
    <div class="controls">
      <!-- do some stuff to see if this type has a specific view partial -->
<h6><%= fk %> is a <%= val.type.to_s %></h6>
      <% if File.file?(File.expand_path("_#{val.type.to_s.downcase}_form.html.erb", File.dirname(__FILE__))) %>
        <%= render :partial => "#{val.type.to_s.downcase}_form", :locals => {f: f, fk: fk} %>
      <% else %>
        <%= f.text_field fk.intern, :class => 'text_field' %>
      <% end %>
    </div>
  </div>
  <% end %>
  <div class="form-actions">
    <%= f.submit nil, :class => 'btn btn-primary' %>
    <%= link_to t('.cancel', :default => t("helpers.links.cancel")),
                contents_path, :class => 'btn' %>
  </div>
  <%  end %>
