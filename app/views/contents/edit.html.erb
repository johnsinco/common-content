<%- model_class = @content.class -%>
<div class="page-header">
  <h1><%=t '.title', :default => t('helpers.titles.define', :model => model_class.model_name.human,
                   :default => "Edit #{model_class.model_name.human}") %></h1>
</div>
<%= form_for @content, :as => :content, :url => content_path(@content.id), :html => { :class => 'form-horizontal' } do |f| %>
  <% @content.data_fields.each do |fk, val| %>
  <div class="control-group">
    <%= f.label fk.intern, :class => 'control-label' %> - <%= fk %> -- <%= val %>
    <div class="controls">
      <!-- do some stuff to see if this type has a specific view partial -->
      <% if File.file?(File.expand_path("_#{val.to_s.downcase}_form.html.erb", File.dirname(__FILE__))) %>
        <% f.fields_for fk do |ff| %>
<h3>in f.fields_for with <%= ff.object %></h3>
          <%= render :partial => "#{val.to_s.downcase}_form", :locals => {f: ff, fk: fk} %>
        <% end %>
      <% else %>
        <%= f.text_field fk.intern, :class => 'text_field' %>
      <% end %>
    </div>
  </div>
  <% end %>
  <div class="form-actions">
    <%= f.submit nil, :class => 'btn btn-primary' %>
    <%= link_to t('.cancel', :default => t("helpers.links.cancel")),
                contents_path, :class => 'btn' %>
  </div>
  <%  end %>
